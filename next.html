<html>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
  <!--<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" /> -->
  <script type="text/javascript" src="cordova.js"></script>
  <!--<script type="text/javascript" src="js/index.js"></script>-->
  <script src="node_modules/onsenui/js/onsenui.min.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry"></script>
	<meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
	<head>
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.12.1.custom/jquery-ui.js"></script>
    <script type="text/javascript" src="jquery-ui-1.12.1.custom/jquery.ui.touch-punch.min.js"></script>
    <link rel="stylesheet" href="node_modules/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="node_modules/onsenui/css/onsen-css-components.min.css">

	</head>

	<body>

    <ons-splitter>
      <ons-splitter-side id="menu" side="left" width="220px" swipe-target-width="125px" collapse swipeable >
        <ons-page>
          <ons-list id="chatMember">
            <ons-list-header><img src='logo.png' width='70%'></ons-list-header>
            <a href="next.html" style="text-decoration:none;"><ons-list-item class="mentionBtn" tappable>Home</ons-list-item></a>
            <a href="about.html" style="text-decoration:none;"><ons-list-item class="mentionBtn" tappable>About</ons-list-item></a>
            <a href="profile.html" style="text-decoration:none;"><ons-list-item class="mentionBtn" tappable>Profile</ons-list-item></a>
            <ons-list-item class="mentionBtn" tappable>Support</ons-list-item>
            <ons-list-item style="position:absolute;overflow:hidden;bottom:0;" class="mentionBtn" onclick="onBackKeyDown()" tappable>Logout</ons-list-footer>
          </ons-list>
        </ons-page>
      </ons-splitter-side>
      <ons-splitter-content id="content" page="home.html"></ons-splitter-content>
    </ons-splitter>
    <template id="home.html">
    <ons-page id="page1">
        <ons-toolbar style="background-color:white;">
        <div class="left">
            <ons-toolbar-button onclick="fn.open()">
                <ons-icon icon="md-menu" style="color:black;"></ons-icon>
            </ons-toolbar-button>
        </div>

        <div class="center" style="color:black;">
          Go & Rent
        </div>
        </ons-toolbar>

		<div class="center">
    		<div class='cTitle'>
				<img src='logo.png' width='70%'>
        			<div class='cFormDalam'>
						<h1><input type="text" id="timoText" placeholder="Search"/><button id="b1">Search</button></h1>
					</div>
      		</div>
        </div>

		<div style="width:100%;height:calc(100% - 50px);">
		  <span class="header-slider">For You</span>
		  <div class='seeMore' onclick="pindahSeemore('ambilSemuaRumah')">See More ></div>
			<div class="horizontal-menu" style="display:absolute;" id="foryou">
			<a href="detail.html">
            <div class="detailRestoranBtn" style="display:inline-block;margin-bottom:20px;">
				<div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
				<div class="content">
					<div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart-full.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
				</div>
            </div>
            </a>
            <div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
					<div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
			<div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
                   <div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
			<div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
                   <div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
        </div>

		<span class="header-slider">Near Me</span>
    <div class='seeMore' onclick="pindahSeemore('ambilNearme')">See More ></div>
            <div class="horizontal-menu" style="display:absolute;" id="nearme">
            <div class="detailRestoranBtn" style="display:inline-block;">
				<div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
				<div class="content">
					<div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
				</div>
            </div>
            <div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
					<div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
			<div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
                   <div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
			<div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
                   <div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
        </div>

		<span class="header-slider">High Rating</span>
    <div class='seeMore' onclick="pindahSeemore('ambilHighRating')">See More ></div>
        <div class="horizontal-menu" style="display:absolute;" id="highrating">
            <div class="detailRestoranBtn" style="display:inline-block;">
				<div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
				<div class="content">
					<div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
				</div>
            </div>
            <div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
					<div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
			<div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
                   <div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
			<div class="detailRestoranBtn" style="display:inline-block;">
              <div class="img-feature"><center><img src='img/src1.png' style="width:100%;height:100%;"></center></div>
              <div class="content">
                   <div class="heart" style="margin-top:10px;margin-bottom:10px;"><img src="img/heart.png" style="width:15%;height:15%"></div>
					<h5><b>Kebab Kings, Dhar...</b></h5>
					<span style="font-size: 0.8em">12.00 - 22.00 &bull; 2.29 km</span>
              </div>
            </div>
        </div>
		</div>
        <footer>
			<div class="" style="float:left;width:20%;">
				<a href="#"><img src="img/explore_active.png" alt="" style="width:100%;height:100%;"></a>
			</div>
			<div class="" style="float:left;width:20%;">
				<a href="favorite.html"><img src="img/favorite.png" alt="" style="width:100%;height:100%;"><br></a>
			</div>
			<div class="" style="float:left;width:20%;">
				<a href="history.html"><img src="img/history.png" alt="" style="width:100%;height:100%;"><br></a>
			</div>
			<div class="" style="float:left;width:20%;">
				<a href="becomehost.html"><img src="img/inbox.png" alt="" style="width:100%;height:100%;"><br></a>
			</div>
			<div class="" style="float:left;width:20%;">
				<a href="profile.html"><img src="img/profile.png" alt="" style="width:100%;height:100%;"><br></a>
			</div>
		</footer>
  </ons-page>
  </template>
	</body>
  <script type="text/javascript">
  var latkita=0,longkita=0;
  var server = "http://192.168.1.3/sdpajax/server.php";
  function generateRandomLong() {
    var num = (Math.random()*180).toFixed(3);
    var posorneg = Math.floor(Math.random());
    if (posorneg == 0) {
        num = num * -1;
    }
    return num;
  }
  // LATITUDE -90 to +90
  function generateRandomLat() {
      var num = (Math.random()*90).toFixed(3);
      var posorneg = Math.floor(Math.random());
      if (posorneg == 0) {
          num = num * -1;
      }
      return num;
  }
  function pindahSeemore(id){
    localStorage.setItem("tipeName",id);
    window.location = "see_more.html";
  }
  var onSuccess = function(position) {
        /*alert('Latitude: '          + position.coords.latitude          + '\n' +
              'Longitude: '         + position.coords.longitude         + '\n' +
              'Altitude: '          + position.coords.altitude          + '\n' +
              'Accuracy: '          + position.coords.accuracy          + '\n' +
              'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
              'Heading: '           + position.coords.heading           + '\n' +
              'Speed: '             + position.coords.speed             + '\n' +
              'Timestamp: '         + position.timestamp                + '\n');*/
        latkita = position.coords.latitude;
        longkita = position.coords.longitude;
    };

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }
    var ini;
    document.addEventListener("deviceready", onDeviceReady, false);
    function fungsiheart(id){
      console.log(ini);
      $.post(server, {'userskr' : ini ,'id_rumah' : id,'tipe': "updateHeart"},function(data){
        if(data == "b"){
          $("#heart-"+id+"hai").html('<img src="img/heart-full.png" style="width:25px;height:25px"  onclick="fungsiheart(\''+id+'\')">');
        }else{
          $("#heart-"+id+"hai").html('<img src="img/heart.png" style="width:25px;height:25px"  onclick="fungsiheart(\''+id+'\')">')
        }
      });
    }
    function pindahDetail(id){
      localStorage.setItem("detailID",id);
      window.location = "detail.html";
    }
    function onDeviceReady(){
      ini = localStorage.getItem("storageName") != null ? localStorage.getItem("storageName") : "tm_tr" ;
      //alert(ini);
      navigator.geolocation.getCurrentPosition(onSuccess, onError);
      $.post(server, {'userskr' : ini ,'longkita' : longkita , 'latkita': latkita,'tipe': "ambilSemuaRumah"},function(data){
        data = JSON.parse(data);
        var x = Math.floor((Math.random() * data.length));
        var y = Math.floor((Math.random() * data.length));
        var z = Math.floor((Math.random() * data.length));
        var hearthfull = data[x].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#foryou").html('<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[x].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[x].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[x].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[x].id_rumah+'\')"></div><h5><b>'+data[x].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[x].kapasitas+' Orang &bull; '+(Math.floor((google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(latkita, longkita), new google.maps.LatLng(parseInt(data[x].longlat_rumah.split(" ")[0]),parseInt(data[x].longlat_rumah.split(" ")[1])))/1000)*1000)/1000)+' km</span></div></div>');
        hearthfull = data[y].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#foryou").html($("#foryou").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[y].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[y].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[y].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[y].id_rumah+'\')" ></div><h5><b>'+data[y].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[y].kapasitas+' Orang &bull; '+(Math.floor((google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(latkita, longkita), new google.maps.LatLng(parseInt(data[y].longlat_rumah.split(" ")[0]),parseInt(data[y].longlat_rumah.split(" ")[1])))/1000)*1000)/1000)+' km</span></div></div>');
        hearthfull = data[z].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#foryou").html($("#foryou").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[z].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[z].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[z].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[z].id_rumah+'\')" ></div><h5><b>'+data[z].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[z].kapasitas+' Orang &bull; '+(Math.floor((google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(latkita, longkita), new google.maps.LatLng(parseInt(data[z].longlat_rumah.split(" ")[0]),parseInt(data[z].longlat_rumah.split(" ")[1])))/1000)*1000)/1000)+' km</span></div></div>');
      });
      $.post(server, {'userskr' : ini,'longkita' : longkita , 'latkita': latkita ,'tipe': "ambilNearme"},function(data){
        data = JSON.parse(data);
        data.sort(function(a,b){
          return a.distance - b.distance;
        });
        var hearthfull = data[0].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#nearme").html('<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[0].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[0].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[0].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[0].id_rumah+'\')" ></div><h5><b>'+data[0].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[0].kapasitas+' Orang &bull; '+(Math.floor(data[0].distance*1000)/1000)+' km</span></div></div>');
        var hearthfull = data[1].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#nearme").html($("#nearme").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[1].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[1].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[1].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[1].id_rumah+'\')" ></div><h5><b>'+data[1].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[1].kapasitas+' Orang &bull; '+(Math.floor(data[1].distance*1000)/1000)+' km</span></div></div>');
        var hearthfull = data[2].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#nearme").html($("#nearme").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[2].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[2].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[2].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[2].id_rumah+'\')" ></div><h5><b>'+data[2].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[2].kapasitas+' Orang &bull; '+(Math.floor(data[2].distance*1000)/1000)+' km</span></div></div>');
        var hearthfull = data[3].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#nearme").html($("#nearme").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[3].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[3].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[3].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[3].id_rumah+'\')" ></div><h5><b>'+data[3].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[3].kapasitas+' Orang &bull; '+(Math.floor(data[3].distance*1000)/1000)+' km</span></div></div>');
      });
      $.post(server, {'userskr' : ini,'longkita' : longkita , 'latkita': latkita ,'tipe': "ambilHighRating"},function(data){
        data = JSON.parse(data);
        var hearthfull = data[0].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#highrating").html('<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[0].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[0].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[0].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[0].id_rumah+'\')" ></div><h5><b>'+data[0].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[0].kapasitas+' Orang &bull; '+(Math.floor(data[0].distance*1000)/1000)+' km</span></div></div>');
        var hearthfull = data[1].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#highrating").html($("#highrating").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[1].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[1].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[1].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[1].id_rumah+'\')" ></div><h5><b>'+data[1].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[1].kapasitas+' Orang &bull; '+(Math.floor(data[1].distance*1000)/1000)+' km</span></div></div>');
        var hearthfull = data[2].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#highrating").html($("#highrating").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[2].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[2].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[2].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[2].id_rumah+'\')" ></div><h5><b>'+data[2].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[2].kapasitas+' Orang &bull; '+(Math.floor(data[2].distance*1000)/1000)+' km</span></div></div>');
        var hearthfull = data[3].adaheart.ada != 0 ? "img/heart-full.png" : "img/heart.png";
        $("#highrating").html($("#highrating").html()+'<div class="detailRestoranBtn" onclick="pindahDetail(\''+data[3].id_rumah+'\')" style="display:inline-block;height:auto;"><div class="img-feature"><center><img class="gbr" src="'+data[3].picture_rumah+'" style="width:100%;height:100%;"></center></div><div class="content"><div class="heart" id="heart-'+data[3].id_rumah+'hai" style="margin-top:10px;margin-bottom:10px;"><img src="'+hearthfull+'" style="width:25px;height:25px" onclick="fungsiheart(\''+data[3].id_rumah+'\')" ></div><h5><b>'+data[3].title_rumah+'</b></h5><span style="font-size: 0.8em">'+data[3].kapasitas+' Orang &bull; '+(Math.floor(data[3].distance*1000)/1000)+' km</span></div></div>');
      });
    }
    $(document).ready(onDeviceReady);
    /*
    $.post(server, {'tipe': "ambilSemuaRumah"},function(data){
      data = JSON.parse(data);
      for(var i = 0 ; i < data.length; i++){
        var isi = Math.floor(Math.random()*3);
        var title = isi == 0 ? "Rumah dekat mall" : isi == 1 ? "Rumah dekat pantai" : "Rumah dekat wisata";
        $.post(server, {'id': data[i].id_rumah ,'tipe': "updateTitleRumah",'title' : title},function(data){

        });
      }
    });
    $.post(server, {'tipe': "ambilSemuaRumah"},function(data){
      data = JSON.parse(data);
      for(var i = 0 ; i < data.length; i++){
        $.post(server, {'id': data[i].id_rumah ,'tipe': "updateLongLat",'long':generateRandomLong() , 'lat' : generateRandomLat},function(data){

        });
      }
    });
    function getIp() {
        ons.notification.prompt({message: 'Masukkan ip server'}).then(function(answer) {
            if(answer.trim() == '')
                getIp();
            else {
                server += answer;
                server += '/sdpajax/server.php';
            }
        });
        //getIp();
        $.post(server, {'user': localStorage.getItem("storageName"), 'tipe': 3},function(data){
          data = JSON.parse(data);
          cordova.plugins.notification.local.schedule({
              id: 5,
              title: "Berhasil Login",
              text: "Halo "+data['name']+"!"
          });
        });
        ons.ready(function() {
              /*getIp();
              $.post(server, {'user': 'timo', 'tipe': 2},function(data){
                cordova.plugins.notification.local.schedule({
                    id: 10,
                    title: "Berhasil Login",
                    text: "Halo "+data['nama']+"!"
                });
              });

              // makeNotification(0, 'ini title', 'ini isi dari text');
              /*cordova.plugins.notification.local.on("click", function(notification) {
                  cordova.plugins.notification.local.clearAll();
              });*/


              // navigator.vibrate([300, 10, 150, 10, 150]);
              /*
          });
          $(document).ready(onDeviceReady());

        function myfunc(){
          window.plugins.googleplus.login({},function (obj) {
            alert(JSON.stringify(obj)); // do something useful instead of alerting
          },
          function (msg) {
            alert('error: ' + msg);
          });
        };
        function myfuncfb(){
          var fbLoginSuccess = function(result){
          //calling api after login success
          facebookConnectPlugin.api("/me?fields=email,name,birthday",['email','user_birthday','public_profile'],function(userData){
          //API success callback
            alert("User Info : "+userData.email+"\n Hello ! Our Beloved : "+userData.name +"\n We Want to Remind You that your Birthday is : "+userData.birthday);
            },function(error){
          //API error callback
            alert(JSON.stringify(error));
            });
          }
          //alert("user Info : "+userData.name+" Hello "+userData.email);
          //document.getElementById("cobaAjax").innerHTML=JSON.stringify(userData);
          //alert("UserInfo: "+userData['email'] + "\n Hello "+userData['name']+" Good to see you");
          //};
          facebookConnectPlugin.login(['email','user_birthday','public_profile'], fbLoginSuccess,
          function loginError (error) {
          alert(JSON.stringify(error));
        });
        };
    }*/


  function onBackKeyDown(){
    makeNotification();
    $.post(server, {'chat': chat, 'nama': nama, 'tipe': 2});

    var x = confirm("Are you sure ?");
    window.plugins.googleplus.disconnect(
      function (msg) {
        alert("Berhasil Logout Google"); // do something useful instead of alerting
      },function (msg) {
        alert("Gagal Logout Google"); // do something useful instead of alerting
        x=false;
        alert(msg);

      }
    );
    facebookConnectPlugin.api("/me/permissions?method=delete", ['email','user_birthday','public_profile'],function (msg) {
      alert("Berhasil Logout  Facebook"); // do something useful instead of alerting
    }, function (msg) {
      alert("Gagal Logout Facebook"); // do something useful instead of alerting
      x=false;
      alert(msg);
    });
    facebookConnectPlugin.logout(function (msg) {
      alert("Berhasil Logout  Facebook"); // do something useful instead of alerting
    }, function (msg) {
      alert("Gagal Logout Facebook"); // do something useful instead of alerting
      x=false;
      alert(msg);
    });

    if(x){
      if (navigator.app) {
          navigator.app.exitApp();
      } else if (navigator.device) {
          navigator.device.exitApp();
      } else {
          window.close();
      }
    }
  }
  window.fn = {};
    window.fn.open = function() {
        let menu = document.getElementById('menu');
        menu.open();
    };

    window.fn.close = function() {
        let menu = document.getElementById('menu');
        menu.close();
    };
    function makeNotification() {
        cordova.plugins.notification.local.schedule({
            id: 1,
            title: "Coba Coba",
            text: "Hai Hai Timo"
        });
    };

    app.initialize();

  </script>
</html>
